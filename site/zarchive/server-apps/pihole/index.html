
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://andrewbreyen.github.io/MacServer-Documentation/zarchive/server-apps/pihole/" rel="canonical"/>
<link href="../../../img/macmini-icon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-8.5.10" name="generator"/>
<title>Pihole - MacServer Documentation</title>
<link href="../../../assets/stylesheets/main.975780f9.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../css/print-site-enum-headings1.css" rel="stylesheet"/>
<link href="../../../css/print-site-enum-headings2.css" rel="stylesheet"/>
<link href="../../../css/print-site-enum-headings3.css" rel="stylesheet"/>
<link href="../../../css/print-site-enum-headings4.css" rel="stylesheet"/>
<link href="../../../css/print-site-enum-headings5.css" rel="stylesheet"/>
<link href="../../../css/print-site-enum-headings6.css" rel="stylesheet"/>
<link href="../../../css/print-site.css" rel="stylesheet"/>
<link href="../../../css/print-site-material.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="" data-md-color-primary="grey" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#pihole">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="MacServer Documentation" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="MacServer Documentation">
<img alt="logo" src="../../../img/macmini-icon.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            MacServer Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Pihole
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="grey" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="grey" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
</form>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
      Home
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../setup/first-time-setup.md">
        Setup
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../server-apps/macos-server.md">
        Server Apps
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../hardware/hardware.md">
        Hardware
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../troubleshooting/reboot/">
        Troubleshooting
      </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="MacServer Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="MacServer Documentation">
<img alt="logo" src="../../../img/macmini-icon.png"/>
</a>
    MacServer Documentation
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
          Setup
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Setup" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Setup
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../setup/first-time-setup.md">
        First Time Setup
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../setup/first-time-setup-ventura.md">
        Ventura First Time Setup
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../setup/macos-settings.md">
        macOS Settings
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../setup/jumpcloud.md">
        Jumpcloud
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../setup/apple-remote-desktop.md">
        Apple Remote Desktop
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../setup/installs.md">
        Installs
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
          Server Apps
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Server Apps" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Server Apps
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../server-apps/macos-server.md">
        macOS Server
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../server-apps/docker.md">
        Docker
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../server-apps/teamviewer.md">
        TeamViewer
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../server-apps/jellyfin.md">
        Jellyfin
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../server-apps/homebridge.md">
        Homebridge
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../server-apps/homeassistant.md">
        Home Assistant
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../server-apps/scrypted.md">
        Scrypted
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../server-apps/node-red.md">
        Node-RED
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../server-apps/pihole.md">
        Pihole
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../server-apps/tdarr.md">
        Tdarr
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../server-apps/timemachine-editor.md">
        Time Machine Editor
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
          Hardware
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Hardware" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Hardware
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/hardware.md">
        Hardware
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/zigbee-conbee.md">
        Zigbee-Conbee
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5">
          Troubleshooting
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Troubleshooting" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          Troubleshooting
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../troubleshooting/reboot/">
        Reboot
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../troubleshooting/live-tv-data-issues/">
        Live TV Guide Data Issues
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../troubleshooting/no-response-homekit/">
        Smart Devices showing as “No Response”/Orange Exclamation mark
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../troubleshooting/network-change-smart-home/">
        Network Change: Smart Home Devices
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../troubleshooting/ventura-update/">
        Ventura Update: Issues and Solutions
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="pihole">Pihole</h1>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Pihole is used as a network wide Ad blocker using DNS.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are two ways to install PiHole.</p>
<ul>
<li>If installing from scratch, go to <a href="#set-up-from-scratch">Set Up From Scratch</a> section</li>
<li>If installing from a precreated .OVA Virtual Machine file, go to the <a href="#set-up-from-virtual-machine-file">Set Up From Virtual Machine File</a> section</li>
</ul>
</div>
<h2 id="set-up-from-scratch">Set Up From Scratch</h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use these directions if setting up from scratch</p>
</div>
<p>Create a VM using VirtualBox. </p>
<p>See <a href="../create-vm/">Create VM</a> for details. </p>
<h3 id="install-pihole">Install PiHole</h3>
<ul>
<li>RUN in terminal of PiHole VM:
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-sSL<span class="w"> </span>https://install.pi-hole.net<span class="w"> </span><span class="p">|</span><span class="w"> </span>bash
</code></pre></div>
More details on installation can be found at <a href="https://github.com/pi-hole/pi-hole/#curl--ssl-httpsinstallpi-holenet--bash">https://github.com/pi-hole/pi-hole/#curl--ssl-httpsinstallpi-holenet--bash</a></li>
<li>When you get to the blue "GUI" screen:<ul>
<li>Majorly accept default settings. Read through and change as you wish.</li>
<li>When prompted for 'Upstream DNS Provider;, select which one you want. They all pretty much do the same thing. Recommendation: OpenDNS</li>
<li>Install the suggested block lists (usually 'StevenBlack's Unified Hosts List' is the default)</li>
<li>Install the Admin Web Interface, lighttpd and required PHP modules</li>
<li>Enable Query logging if you wish</li>
</ul>
</li>
<li>Once installation is complete, note the 'Admin Webpage Login Password' -- The password cannot be retrieved later on, but it is possible to set a new password (or explicitly disable the password by setting an empty password)</li>
</ul>
<!---
*****
***** These directions were for when modem was handling DHCP, this has been shifted to the eeros
*****
1. Open modem web UI [192.168.0.1](192.168.0.1/)
2. Advanced Setup -> DHCP Settings -> 5. Set the DNS servers allocated with DHCP requests
3. Change radio button to `Custom Servers`
4. Enter VM IP address as 'Primary DNS', and Open DNS backup server (8.8.4.4) as 'Secondary DNS'

    ![vmodem-custom-dns-servers.png](../img/modem-web-ui/modem-custom-dns-servers.png){ width="500"}

5. Click `Apply`
--->
<h3 id="finalize-setup">Finalize Setup</h3>
<p>Regardless if setting up PiHole from scratch, or from a Virtual Machine File, some final configuration/verification is required. </p>
<p>Continue to <a href="#set-the-vm-to-auto-launch-in-headless-mode-on-mac-login">Set the VM to auto-launch in headless mode on Mac login</a></p>
<h2 id="set-up-from-virtual-machine-file">Set Up From Virtual Machine File</h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use these directions if setting up PiHole from a Virtual Machine .OVA file</p>
</div>
<h3 id="virtualbox-installation-and-importing-applicance">Virtualbox Installation and Importing Applicance</h3>
<ol>
<li>Download and install Virtualbox from <a href="https://www.virtualbox.org">https://www.virtualbox.org</a></li>
<li>
<p>Download OVA file from <a href="https://1drv.ms/u/s!Ai9VHivOqpbhjzuzVWtlc2ctYijh?e=QS0j5c">OneDrive</a></p>
<p>(Access to this link is restricted -- please confirm if you have access)</p>
</li>
<li>
<p>Open Virtualbox and click 'Import'
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../../img/pihole/virtualbox-import.png"><img alt="virtualbox-import.png" src="../../img/pihole/virtualbox-import.png" width="40"/></a></p>
</li>
<li>Click the folder icon next to the 'File' box and pick the .OVA file</li>
<li>Click 'Continue'</li>
<li>Appliance Settings: Change 'MAC Address Policy' to Include all network adapter MAC addresses. Leave all other settings the same. Click 'Import'</li>
</ol>
<h3 id="verify-settings">Verify Settings</h3>
<ol>
<li>Once the Applicance is imported, verify that the settings match the ones <a href="#change-vm-settings">outlined above</a></li>
<li>Ensure the correct IP address is reserved in the eero app. Details <a href="#set-ip-address-reservation">outlined above</a></li>
</ol>
<h3 id="start-up">Start Up</h3>
<ol>
<li>Start VM in headless mode (click arrow next to start -&gt; headless mode) <br/>
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../../img/pihole/virtualbox-start-headless.png"><img alt="virtualbox-start-headless.png" src="../../img/pihole/virtualbox-start-headless.png" width="75"/></a></li>
<li>Click 'Show'</li>
</ol>
<h3 id="verify-connectivity">Verify Connectivity</h3>
<ol>
<li>
<p>Verify internet connectivity by entering command <code>ping google.com</code>. If you see a response similar to:
    <div class="highlight"><pre><span></span><code>64 bytes from 142.250.191.238: icmp_seq=93 ttl=57 time=42.931 ms
</code></pre></div>
    the VM can reach the internet.</p>
<p>Press <span class="keys"><kbd class="key-control">Ctrl</kbd></span> + <span class="keys"><kbd class="key-c">C</kbd></span> to exit.</p>
</li>
<li>
<p>Verify IP Address by entering command <code>ip addr</code>. Look at the result for the <code>inet 192.168.4.x</code> line. It should be the IP address specified in the eero reservation. 
    <div class="highlight"><pre><span></span><code>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
....
2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
link/ether 08:00:27:1a:f8:19 brd ff:ff:ff:ff:ff:ff
<span class="hll">inet 192.168.4.4/22 metric 100 brd 192.168.7.255 scope global dynamic enp0s3
</span>   valid_lft 14039sec preferred_lft 14039sec
....
</code></pre></div></p>
</li>
</ol>
<h3 id="finalize-setup_1">Finalize Setup</h3>
<p>Regardless if setting up PiHole from scratch, or from a Virtual Machine File, some final configuration/verification is required. </p>
<p>Continue to <a href="#set-the-vm-to-auto-launch-in-headless-mode-on-mac-login">Set the VM to auto-launch in headless mode on Mac login</a></p>
<h2 id="set-the-vm-to-auto-launch-in-headless-mode-on-mac-login">Set the VM to auto-launch in headless mode on Mac login</h2>
<p>Download the script vboxlaunchagent.sh from 
<a href="https://www.whatroute.net/software/vboxlaunchagent.sh.zip">https://www.whatroute.net/software/vboxlaunchagent.sh.zip</a></p>
<p>Move the downloaded file somewhere convenient, like the Desktop. </p>
<div class="admonition quote">
<p class="admonition-title">whatroute.net</p>
<p>LaunchAgents are configured with an Apple plist XML file installed in the users Library/LaunchAgents folder. When the user logs in to their account on the Mac, launchd will inspect these plist files and invoke the required program with specified arguments.</p>
<p>It can get a bit tricky to create a plist manually. They have very fussy and very unforgiving syntax requirements. This shell script will create the plist and install it in the LaunchAgents directory.</p>
<p>You can download the script from vboxlaunchagent.sh. Unzip the file and copy the script to a suitable directory on your machine.</p>
</div>
<p>Run the script using this syntax:</p>
<ol>
<li>
<p>Find the name of the VM: In a terminal on MacServer directly (not the VM), run:
   <div class="highlight"><pre><span></span><code>VBoxManage<span class="w"> </span>list<span class="w"> </span>vms
</code></pre></div></p>
<p>Should result in output similar to:<br/>
<div class="highlight"><pre><span></span><code>macmini@macserver<span class="w"> </span>~<span class="w"> </span>%<span class="w"> </span>VBoxManage<span class="w"> </span>list<span class="w"> </span>vms
<span class="s2">"Pihole"</span><span class="w"> </span><span class="o">{</span>c7ac734f-3fc7-4645-997b-3c78ef32d8f4<span class="o">}</span>
</code></pre></div></p>
<p>In this example, Pihole is the name of the VM.</p>
</li>
<li>
<p>In a terminal, run
   <div class="highlight"><pre><span></span><code>sh<span class="w"> </span>path/to/vboxlaunchagent.sh<span class="w"> </span>--headless<span class="w"> </span>--verbose<span class="w"> </span><span class="s2">"VMName"</span>
</code></pre></div>
   replacing <code>VMName</code> with the name of the VM from the previous step, and <code>/path/to/vboxlaunchagent.sh</code> with the full path (likely will be <code>~/Downloads/vboxlaunchagent.sh</code> if you just clicked the link above)</p>
</li>
<li>
<p>Ensure that the output is similar to
    <div class="highlight"><pre><span></span><code>VirtualBox VM found. . . : PiHole
Created temporary file . : /tmp/org.virtualbox.launch.PiHole
Created Launch Agent . . : /Users/macmini/Library/LaunchAgents/org.virtualbox.launch.PiHole.plist
</code></pre></div></p>
</li>
<li>
<p>Reboot the Mac and ensure the VM auto-starts on login</p>
</li>
</ol>
<p>(Script and explanation from <a href="https://www.whatroute.net/installerapp2iso.html">https://www.whatroute.net/installerapp2iso.html</a>)</p>
<h2 id="configure-pihole">Configure PiHole</h2>
<ul>
<li>Remove or change admin web page password: RUN in terminal of PiHole VM:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>pihole<span class="w"> </span>-a<span class="w"> </span>-p
</code></pre></div></li>
<li>Open the Web UI (http://your.static.ip.address/admin)</li>
<li>Configure as you wish</li>
</ul>
<h2 id="set-dhcp-server">Set DHCP Server</h2>
<ol>
<li>Open the eero app</li>
<li>Go to Settings -&gt; Network Settings -&gt; DNS</li>
<li>Set to 'Custom'</li>
<li>Set 'IPv4 Primary' to the static IP address of PiHole</li>
<li>Set 'IPv4 Secondary' to a backup DNS provider to use.</li>
</ol>
<details class="info">
<summary>Available Providers</summary>
<p>Usually it's a good idea to use the same DNS provider that you selected during PiHole setup. However, this is not required.</p>
<p>Some available providers:</p>
<ul>
<li>OpenDNS: 208.67.222.222</li>
<li>Google: 8.8.8.8</li>
<li>CloudFlare: 1.1.1.1</li>
</ul>
</details>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You can choose to not supply a secondary provider to force PiHole to be used exclusively.</p>
<p>However, if a secondary DNS provider is not set, if PiHole is down or unavailable to reqpond to queries, DNS queries will not be able to be resolved, resulting in no internet access. </p>
</div>
<p><br/><br/>
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../../img/emotes/parrot.gif"><img alt="parrot.gif" src="../../img/emotes/parrot.gif"/></a>
Once the DNS server is set, Congrats! Pihole is now in use for all devices on the network.
You can test PiHole by visiting a website that previously had ads, they should be blocked now :)</p>
<h2 id="troubleshooting-sites-not-loading">Troubleshooting Sites not Loading</h2>
<p>Pihole is a tracking and ad-blocker. Because of this, some sites may not load, or be missing content. </p>
<h3 id="temporarily-disable-pihole">Temporarily Disable Pihole</h3>
<p>If this is a one-off thing that you need to load, you can temporarily disable Pihole across the whole network. </p>
<ol>
<li>Open the <a href="http://192.168.4.4/admin">PiHole Web UI</a></li>
<li>Click 'Disable'</li>
<li>Choose an amount of time to disable. 5 minutes is usually sufficent. </li>
</ol>
<p>PiHole is now disabled, and will be automatically re-enabled once the time elapses.</p>
<h3 id="add-a-site-to-the-whitelist">Add a site to the whitelist</h3>
<ol>
<li>Open the <a href="http://192.168.4.4/admin">PiHole Web UI</a></li>
<li>Click 'Whitelist'</li>
<li>
<p>Type the domain where you are encountering issues in the 'Domain' field. </p>
<p>Add any comments as needed</p>
</li>
<li>
<p>Check the 'Add domain as wildcard' box</p>
</li>
<li>Click 'Add to Whitelist'</li>
</ol>
<h3 id="use-the-audit-log">Use the Audit Log</h3>
<p>Audit Log will show the top allowed and blocked queries with quick access to blacklist or whitelist them</p>
<ol>
<li>Open the <a href="http://192.168.0.4/admin">PiHole Web UI</a></li>
<li>Click 'Tools' -&gt; 'Audit Log'</li>
</ol>
<h2 id="updating-pihole-pihole-and-underlying-ubuntu-os">Updating Pihole (Pihole and underlying Ubuntu OS)</h2>
<p>If you see red text at the bottom of the PiHole web UI ‘Update Available’, it needs an update. This is currently a manual process, work in progress to automate it. There are two options, both do exactly the same thing. The SSH option may be easier. </p>
<h3 id="via-ssh">Via SSH</h3>
<h4 id="pihole-updates">Pihole Updates</h4>
<ol>
<li>
<p>Open a Terminal and enter command: <code>ssh pihole@pi.hole</code><br/>
    If you get a message similar to:<br/>
<div class="highlight"><pre><span></span><code>The authenticity of host 'pi.hole (192.168.0.4)' can't be established.
ED25519 key fingerprint is SHA256:jWxxjslC9ObhMty4d0UNERghKP6UWmetfEj80CKW6QY.
This host key is known by the following other names/addresses:
    ~/.ssh/known_hosts:8: 192.168.0.4
Are you sure you want to continue connecting (yes/no/[fingerprint])?
</code></pre></div></p>
<p>This is likely because you have not connected to the PiHole VM using SSH previously, and your computer cannot verify the authenticity of the server computer.</p>
<p>Verify the IP address is what you expect (in this example, <code>192.168.0.4</code>) and if it’s correct, type <code>yes</code> at the prompt. </p>
<p>After you have sone this once, you likely will not have to do it again, unless the fingerprint key changes. </p>
</li>
<li>
<p>At the prompt <code>pihole@pi.hole's password:</code> enter the PiHole user password. Once successfully connected, you should see a prompt similar to <code>pihole@pihole:~$</code>. You are now SSHed into the PiHole VM!</p>
</li>
<li>
<p>Run command
   <div class="highlight"><pre><span></span><code>pihole -up
</code></pre></div></p>
</li>
<li>If prompted <code>[sudo] password for pihole:</code>  enter the PiHole user password  </li>
<li>Wait for it to update. On success, you should see   <code>[✓] Everything is up to date!</code></li>
</ol>
<h4 id="ubuntu-updates">Ubuntu Updates</h4>
<p>It’s also a good idea to update the underlying Ubuntu instance periodically, especially if there is a notice then you logged into the Pihole VM similar to: 
<div class="highlight"><pre><span></span><code>91 updates can be applied immediately.
9 of these updates are standard security updates.
</code></pre></div></p>
<p>To do this:</p>
<ol>
<li>Run <code>sudo apt upgrade</code></li>
<li>
<p>You may be prompted:
<div class="highlight"><pre><span></span><code>After this operation, 430 MB of additional disk space will be used.
Do you want to continue? [Y/n]
</code></pre></div>
Enter <span class="keys"><kbd class="key-y">Y</kbd></span></p>
</li>
<li>
<p>Wait for it to update. This may take a while, depending on the number of updates.</p>
</li>
</ol>
<h3 id="via-apple-remote-desktop">Via Apple Remote Desktop</h3>
<h4 id="pihole-updates_1">Pihole Updates</h4>
<ol>
<li>Open Apple Remote Desktop</li>
<li>Select <code>MacServer</code> from All Computers</li>
<li>Click on <code>Control</code> or from the taskbar, or choose <code>Interact &gt; Control</code> </li>
<li>A new window will open with the MacServer display. </li>
<li>From the Dock, Applications Folder or Spotlight, open <code>VirtualBox</code></li>
<li>Ensure <code>Pihole</code> is selected in the sidebar<br/>
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../../img/pihole/virtualbox-pihole-running.png"><img alt="virtualbox-pihole-running.png" src="../../img/pihole/virtualbox-pihole-running.png" width="200"/></a></li>
<li>Click <code>Show</code> <a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../../img/pihole/virtualbox-show.png"><img alt="virtualbox-pihole-running.png" src="../../img/pihole/virtualbox-show.png" width="40"/></a></li>
<li>A new window will open with the PiHole VM. </li>
<li>In that new window, ensure you have a <code>pihole@pihole:~$</code> prompt. If you do not, press <span class="keys"><kbd class="key-enter">Enter</kbd></span> a few times to get to a new line. </li>
<li>Run command
    <div class="highlight"><pre><span></span><code>pihole<span class="w"> </span>-up
</code></pre></div></li>
<li>If prompted <code>[sudo] password for pihole:</code>  enter the PiHole user password</li>
<li>Wait for it to update. On success, you should see   <code>[✓] Everything is up to date!</code></li>
</ol>
<h4 id="ubuntu-updates_1">Ubuntu Updates</h4>
<p>It’s also a good idea to update the underlying Ubuntu instance periodically, especially if there is a notice then you logged into the Pihole VM similar to: 
<div class="highlight"><pre><span></span><code>91 updates can be applied immediately.
9 of these updates are standard security updates.
</code></pre></div></p>
<p>To do this:</p>
<ol>
<li>Run 
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>upgrade
</code></pre></div></li>
<li>
<p>You may be prompted:
<div class="highlight"><pre><span></span><code>After this operation, 430 MB of additional disk space will be used.
Do you want to continue? [Y/n]
</code></pre></div>
Enter <span class="keys"><kbd class="key-y">Y</kbd></span></p>
</li>
<li>
<p>Wait for it to update. This may take a while, depending on the number of updates.</p>
</li>
</ol>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
<a href="/MacServer-Documentation/attributions">Attributions</a>
</div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.top", "toc.follow", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
<script src="../../../js/print-site.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>